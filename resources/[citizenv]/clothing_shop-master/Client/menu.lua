ModuleMenu={}ModuleMenu.__index=ModuleMenu;function ModuleMenu:create(a)local self={}setmetatable(self,ModuleMenu)self.menu={}self.historic={}self.currentuser=currentUser;self.x=a.x;self.y=a.y;self.width=a.width;self.height=a.height;self.buttons=a.buttons;self.from=a.from;self.to=a.to;self.scale=a.scale;self.font=a.font;self.open=a.open;self.title=a.title;self.currentmenu=a.currentmenu;self.lastmenu=a.lastmenu;self.currentpos=a.currentpos;self.selectedbutton=a.selectedbutton;self.marker=a.marker;self.baseMenu=a.currentmenu;return self end;function ModuleMenu:open()self.open=true end;function ModuleMenu:close()self.currentmenu="main"self.open=false end;function ModuleMenu:navsButtons(b)if IsControlJustPressed(1,188)then if self.selectedbutton>1 then self.selectedbutton=self.selectedbutton-1;if b>10 and self.selectedbutton<self.from then self.from=self.from-1;self.to=self.to-1 end end end;if IsControlJustPressed(1,187)then if self.selectedbutton<b then self.selectedbutton=self.selectedbutton+1;if b>10 and self.selectedbutton>self.to then self.to=self.to+1;self.from=self.from+1 end end end end;function ModuleMenu:setCurrentVariation(c,d)if c=="left"then self.menu[d].userSelectVariation=self.menu[d].userSelectVariation-1 else self.menu[d].userSelectVariation=self.menu[d].userSelectVariation+1 end end;function ModuleMenu:getLastMenu()return self.lastmenu end;function ModuleMenu:onClick(e)if IsControlJustPressed(1,201)then e.onClick()end end;function ModuleMenu:onLeft(e)if IsControlJustPressed(1,174)then e.onLeft()end end;function ModuleMenu:onRight(e)if IsControlJustPressed(1,175)then e.onRight()end end;function ModuleMenu:onSelected(e)e.onSelected()end;function ModuleMenu:onBack(e)if IsControlJustPressed(1,202)then e.onBack()end end;function ModuleMenu:toMenu(f)self:OpenMenu(f)end;function ModuleMenu:setMenu(d,g,h,i)self.menu[d]={title=g,name=d,buttons=h,currentVariation=0,userSelect=0,userSelectVariation=0,rightInfo=i,onBack=function()if self.currentmenu~=self.baseMenu then self:toMenu(self:getLastMenu())end end}end;function ModuleMenu:OpenMenu(j)self.lastmenu=self.currentmenu;self.from=1;self.to=10;self.selectedbutton=0;self.currentmenu=j end;function ModuleMenu:setTexte()self:drawTxt(self.menu[self.currentmenu].title,1,1,self.x,self.y,1.0,255,255,255,255)self:drawMenuTitle(self.menu[self.currentmenu].title,self.x,self.y+0.08)self:drawTxt(self.selectedbutton.."/"..#self.menu[self.currentmenu].buttons,0,0,self.x+self.width/2-0.0385,self.y+0.067,0.4,255,255,255,255)end;function ModuleMenu:drawTxt(k,l,m,n,o,p,q,r,s,t)SetTextFont(l)SetTextProportional(0)SetTextScale(p,p)SetTextColour(q,r,s,t)SetTextDropShadow(0,0,0,0,255)SetTextEdge(1,0,0,0,255)SetTextDropShadow()SetTextOutline()SetTextCentre(m)SetTextEntry("STRING")AddTextComponentString(k)DrawText(n,o)end;function ModuleMenu:drawMenuButton(e,n,o,u)local j=self;SetTextFont(j.font)SetTextProportional(0)SetTextScale(j.scale,j.scale)if u then SetTextColour(0,0,0,255)else SetTextColour(255,255,255,255)end;SetTextCentre(0)SetTextEntry("STRING")AddTextComponentString(e.name)if u then DrawRect(n,o,j.width,j.height,255,255,255,255)else DrawRect(n,o,j.width,j.height,0,0,0,150)end;DrawText(n-j.width/2+0.005,o-j.height/2+0.0028)end;function ModuleMenu:drawMenuInfo(k)local j=self;SetTextFont(j.font)SetTextProportional(0)SetTextScale(0.45,0.45)SetTextColour(255,255,255,255)SetTextCentre(0)SetTextEntry("STRING")AddTextComponentString(k)DrawRect(0.675,0.95,0.65,0.050,0,0,0,150)DrawText(0.365,0.934)end;function ModuleMenu:drawMenuRight(v,n,o,u)local j=self;SetTextFont(j.font)SetTextProportional(0)SetTextScale(j.scale,j.scale)SetTextRightJustify(1)if u then SetTextColour(0,0,0,255)else SetTextColour(255,255,255,255)end;SetTextCentre(0)SetTextEntry("STRING")AddTextComponentString(v)DrawText(n+j.width/2-0.03,o-j.height/2+0.0028)end;function ModuleMenu:drawMenuTitle(v,n,o)local j=self;SetTextFont(2)SetTextProportional(0)SetTextScale(0.5,0.5)SetTextColour(255,255,255,255)SetTextEntry("STRING")AddTextComponentString(v)DrawRect(n,o,j.width,j.height,58,83,155,150)DrawText(n-j.width/2+0.005,o-j.height/2+0.0028)end;function ModuleMenu:display()local o=self.y+0.12;if type(self.menu[self.currentmenu].buttons)=="function"then self.menu[self.currentmenu].buttons=self.menu[self.currentmenu].buttons()end;local b=#self.menu[self.currentmenu].buttons;local u=false;self:setTexte()self:navsButtons(b)for w,e in pairs(self.menu[self.currentmenu].buttons)do if w>=self.from and w<=self.to then if w==self.selectedbutton then u=true else u=false end;self:drawMenuButton(e,self.x,o,u)if self.menu[self.currentmenu].rightInfo then if e.max~=false then end end;if u then self.menu[self.currentmenu].userSelect=e.id;self:onLeft(e)self:onRight(e)self:onSelected(e)self:onClick(e)self:onBack(e)end;o=o+0.04 end end end
